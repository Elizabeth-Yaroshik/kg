# Лабораторная работа №4 (вариант 14)
## 1. Введение
**Цель работы:** Закрепление теоретического материала и практическое освоение алгоритмов отсечения отрезков прямоугольным окном и выпуклым многоугольником.

**Задачи:**
* Реализация алгоритма Лианга-Барски для прямоугольного окна
* Реализация алгоритма отсечения выпуклым многоугольником (Цируса-Бека)
* Создание графического интерфейса для визуализации процесса отсечения
* Обеспечение загрузки данных из файла и интерактивного управления

## 2. Реализованные алгоритмы

### 2.1 Алгоритм Лианга-Барски для прямоугольного окна
**Принцип работы:**
* Представляет отрезок в параметрической форме: P(t) = P₁ + t(P₂ - P₁), где 0 ≤ t ≤ 1
* Вычисляет параметры входа (tEnter) и выхода (tLeave) для каждой границы окна
* Использует четыре параметра (p, q) для каждой границы окна:
  - p₁ = -Δx, q₁ = x₁ - xmin (левая граница)
  - p₂ = Δx, q₂ = xmax - x₁ (правая граница)
  - p₃ = -Δy, q₃ = y₁ - ymin (нижняя граница)
  - p₄ = Δy, q₄ = ymax - y₁ (верхняя граница)

**Особенности реализации:**
* Обработка частных случаев (параллельные границам отрезки)
* Эффективное определение видимой части отрезка
* Возврат null для полностью невидимых отрезков

### 2.2 Алгоритм Цируса-Бека для выпуклого многоугольника
**Принцип работы:**
* Для каждого ребра многоугольника вычисляется внутренняя нормаль
* Определяются параметры входа и выхода отрезка относительно полуплоскостей
* Используется параметрическое представление отрезка
* Проверяется ориентация нормали относительно центра многоугольника

**Ключевые особенности:**
* Автоматическое определение направления нормали
* Обработка параллельных ребрам отрезков
* Проверка выпуклости многоугольника

## 3. Структура программы

### 3.1 Основные классы:
* `ClippingLab` - главный класс приложения
* `DrawingPanel` - панель для визуализации
* `LineSegment` - внутренний класс для представления отрезков

### 3.2 Функциональность:
* **Загрузка данных** из текстового файла с заданным форматом
* **Переключение режимов** отсечения через выпадающий список
* **Визуализация** исходных и отсеченных отрезков, отсекающих областей

### 3.3 Формат входного файла:
```
количество_отрезков
x1 y1 x2 y2     // координаты отрезков
...
xmin ymin xmax ymax  // прямоугольное окно
количество_вершин_многоугольника
x1 y1           // вершины многоугольника
...
```

## 4. Графический интерфейс. Особенности реализации

### 4.1 Система координат и масштабирование:
* Используется масштабируемая система координат с полями (MARGIN = 50)
* Координатная сетка с шагом 20 пикселей
* Масштабный коэффициент scale = 2.0 для лучшей визуализации

### 4.2 Визуальное представление:
* **Исходные отрезки** - синий цвет, тонкие линии
* **Отсеченные части** - красный цвет, толстые линии (толщина 3)
* **Прямоугольное окно** - зеленый цвет с полупрозрачной заливкой
* **Выпуклый многоугольник** - зеленый контур с полупрозрачной заливкой, красные вершины

### 4.3 Элементы управления:
* Выбор алгоритма: "Лианга-Барски" или "Отсечение выпуклым многоугольником"
* Кнопка "Загрузить данные" - загрузка из файла через JFileChooser
* Кнопка "Выполнить отсечение" - запуск выбранного алгоритма

## 5. Анализ алгоритмов

### 5.1 Алгоритм Лианга-Барски:
**Преимущества:**
* Высокая эффективность для прямоугольных окон
* Минимальное количество вычислений
* Простота реализации

**Ограничения:**
* Работает только с прямоугольными окнами
* Требует предварительной проверки на параллельность границам

### 5.2 Алгоритм Цируса-Бека:
**Преимущества:**
* Универсальность - работает с любым выпуклым многоугольником
* Единообразная обработка всех типов выпуклых областей
* Параметрический подход упрощает вычисления

**Ограничения:**
* Требует проверки выпуклости многоугольника
* Более сложная реализация из-за вычисления нормалей

## 6. Обработка особых случаев

### 6.1 Проверка выпуклости многоугольника:
```java
private boolean isConvexPolygon(List<Point2D> polygon)
```
* Вычисление векторных произведений для последовательных вершин
* Проверка одинаковости знаков произведений
* Возврат false при обнаружении вогнутости

### 6.2 Обработка ошибок:
* Проверка наличия загруженных данных перед отсечением
* Валидация количества вершин многоугольника (минимум 3)
* Информативные сообщения об ошибках через JOptionPane

## Заключение

В ходе выполнения лабораторной работы №4 было разработано приложение для визуализации и исследования алгоритмов отсечения отрезков. Программа успешно реализует два основных алгоритма компьютерной графики: Лианга-Барски для прямоугольных окон и Цируса-Бека для выпуклых многоугольников.

### Основные достижения:

**1. Реализация алгоритмов отсечения:**
- **Алгоритм Лианга-Барски** - эффективное отсечение отрезков прямоугольным окном с использованием параметрического представления
- **Алгоритм Цируса-Бека** - универсальное отсечение относительно произвольного выпуклого многоугольника с автоматическим определением нормалей

**2. Создан интуитивный графический интерфейс:**
- Панель управления с выбором алгоритма и кнопками управления
- Масштабируемая область отрисовки с координатной сеткой
- Визуальное разделение исходных и отсеченных отрезков (синий/красный цвета)
- Полупрозрачное отображение отсекающих областей для лучшей визуализации

**3. Функциональность загрузки данных:**
- Поддержка текстовых файлов со структурированным форматом
- Одновременная загрузка отрезков и отсекающих областей
- Проверка корректности входных данных

### Технические особенности реализации:

**Обработка геометрических данных:**
- Корректное преобразование координат с учетом масштабирования
- Проверка выпуклости многоугольника через анализ векторных произведений
- Обработка граничных случаев (параллельные отрезки, вырожденные многоугольники)

**Визуализация:**
- Четкое цветовое кодирование элементов (исходные, отсеченные, области отсечения)
- Отображение вершин многоугольника красными точками
- Информативная легенда с указанием используемого алгоритма
- Плавное масштабирование с сохранением читаемости

**Обработка ошибок:**
- Проверка минимального количества вершин для многоугольника (≥3)
- Контроль наличия данных перед выполнением отсечения
- Информативные сообщения об ошибках через диалоговые окна

### Сравнительный анализ алгоритмов:

**Алгоритм Лианга-Барски:**
- Высокая эффективность для прямоугольных областей
- Минимальные вычислительные затраты
- Простота реализации и понимания

**Алгоритм Цируса-Бека:**
- Универсальность для любых выпуклых многоугольников
- Единый подход для различных типов отсекающих областей
- Более сложная реализация, требующая вычисления нормалей

### Практическая значимость:

Разработанное приложение позволяет:
- Наглядно изучать принципы работы алгоритмов отсечения
- Сравнивать результаты разных методов на одних и тех же данных
- Анализировать эффективность алгоритмов в различных сценариях
- Использовать в образовательных целях для курсов компьютерной графики

Все алгоритмы работают корректно и демонстрируют ожидаемые результаты. Приложение успешно выполняет поставленные задачи лабораторной работы, предоставляя удобный инструмент для исследования алгоритмов отсечения отрезков. Программа обладает модульной структурой и может быть расширена добавлением новых алгоритмов обработки геометрических данных.
